<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta http-equiv="origin-trial" content="AhgUGpciITEzvh3MoMmiJNhHmBMjLVPBmOQdbKVzil07/9n4b4W03l8BkgZoZ3SupDMvcD2rDcXO8yFJbH6r+AUAAABdeyJvcmlnaW4iOiJodHRwOi8vMTI3LjAuMC4xOjU1MDAiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDB9">

    <title>Advanced AI Chat Room</title>
    <style>
        /* Here are some beautification styles to make the page look better */
        body { font-family: sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; background-color: #f4f7f6; }
        #error-message { display: none; color: red; border: 1px solid red; padding: 10px; border-radius: 5px; }
        #prompt-area { display: none; }
        #response-area { margin-top: 20px; }
        .speech-bubble { padding: 15px; border-radius: 15px; margin-bottom: 10px; max-width: 90%; }
        .prompt { background-color: #d1e7ff; align-self: flex-end; text-align: right; }
        .response { background-color: #e9ecef; align-self: flex-start; }
        form { display: flex; gap: 10px; margin-top: 20px; }
        textarea { flex-grow: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; resize: vertical; }
        button { padding: 10px 15px; border: none; border-radius: 5px; background-color: #0d6efd; color: white; cursor: pointer; }
        .settings, .stats { background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        details { margin-top: 20px; }
    </style>
</head>
<body>

    <h1>Advanced AI Chat Room</h1>
    <div id="error-message"></div>

    <div id="prompt-area">
        <div class="settings">
            <h3>AI Settings</h3>
            <label>Temperature (Creativity): <input type="range" id="session-temperature" min="0" max="2" step="0.1"></label>
            <br>
            <label>Top-K (Conservativeness): <input type="range" id="session-top-k" min="1" max="128" step="1"></label>
        </div>

        <div class="stats">
            <h3>Status Statistics</h3>
            <p>Temperature: <span id="temperature"></span> | Top-K: <span id="top-k"></span></p>
            <p>Total Token Quota: <span id="max-tokens"></span> | Used Token: <span id="tokens-so-far"></span> | Remaining Token: <span id="tokens-left"></span></p>
        </div>

        <form>
            <textarea id="prompt-input" placeholder="Enter your question here..." rows="3"></textarea>
            <button type="submit">发送</button>
        </form>
        <p>Current Input Cost: <span id="cost"></span></p>

        <button id="reset-button">Reset Conversation</button>
        
        <div id="response-area">
            </div>

        <div id="problematic-area" style="display: none; color: orange; margin-top: 10px;">
            <strong>Highlighted Issue:</strong> <span id="problem"></span>
        </div>

        <button id="copy-link-button" style="display: none;">Copy Link</button>
        <small style="display: none;">Copy a link containing your question</small>

        <details>
            <summary>View Original AI Response</summary>
            <div></div>
        </details>
    </div>

    <script type="module" src="script.js"></script>

</body>
</html>